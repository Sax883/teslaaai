<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TESLAAI | New Investment & Exclusive Shop</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <style>
        /* --- DESIGN TOKENS --- */
        :root {
            --color-primary: #dc2626; /* Red */
            --color-secondary: #ef4444; /* Lighter Red/CTA */
            --color-accent: #f59e0b; /* Amber/Highlight */
            --color-background-dark: #2c3541; /* Dark Gray for Sidebar/Panel */
            --color-background-darker: #111827; /* Very Dark Blue for Card Background */
            --color-border: #4b5563; /* Light Gray Border */
            --color-text-light: #9ca3af; /* Light Gray Text */
        }
        
        /* --- GENERAL LAYOUT --- */
        .dashboard-body {
            background-color: #1f2937; 
            color: white;
            font-family: 'Poppins', sans-serif;
            margin: 0;
            min-height: 100vh;
        }
        .dashboard-layout {
            display: flex;
            min-height: 100vh;
        }
        
        /* Sidebar Styling */
        .sidebar {
            width: 250px;
            flex-shrink: 0;
            background-color: var(--color-background-dark);
            padding: 2rem 1.5rem;
            min-height: 100vh;
            display: none; 
            flex-direction: column;
            position: fixed; /* Fixed sidebar for better mobile/desktop experience */
            top: 0;
            left: 0;
            z-index: 50;
            transition: transform 0.3s ease-in-out;
            transform: translateX(-100%);
        }
        .sidebar.active {
            transform: translateX(0);
        }
        @media (min-width: 900px) {
            .sidebar {
                display: flex;
                position: sticky;
                transform: translateX(0);
                width: 250px;
                min-height: 100vh;
            }
        }

        /* Mobile Menu Toggle */
        .menu-toggle {
            display: block;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 1rem;
            background-color: #1f2937; /* Match body background */
            position: sticky;
            top: 0;
            z-index: 10;
        }
        @media (min-width: 900px) {
            .menu-toggle {
                display: none;
            }
        }

        .main-content {
            flex-grow: 1;
            padding: 1rem;
        }
        @media (min-width: 900px) {
            .main-content {
                padding: 2rem;
            }
        }
        
        /* Navigation Links (Moved out of HTML inline styles) */
        .sidebar nav a {
            display: flex;
            align-items: center;
            padding: 10px;
            margin-bottom: 5px;
            color: var(--color-text-light);
            text-decoration: none;
            transition: color 0.2s, background-color 0.2s;
            border-radius: 6px;
        }
        .sidebar nav a.active {
            color: var(--color-primary);
            font-weight: bold;
            background-color: rgba(220, 38, 38, 0.1);
        }
        .sidebar nav a:hover {
            background-color: #374151;
        }
        .sidebar nav a i {
            margin-right: 10px;
            width: 20px;
        }

        /* Content Styling */
        .top-bar {
            padding-bottom: 1rem; 
            margin-bottom: 1.5rem; 
            border-bottom: 1px solid var(--color-border);
        }
        .top-bar h1 {
            font-size: 1.5rem;
            font-weight: 700;
        }
        .content-panel {
            background-color: var(--color-background-dark);
            border-radius: 12px;
            padding: 30px; 
            border: 1px solid var(--color-border);
            margin-bottom: 30px; 
        }
        
        .plans-grid, .car-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); 
            gap: 20px;
            margin-top: 30px;
        }
        
        /* CARDS */
        .plan-card, .car-card {
            background-color: var(--color-background-darker);
            border: 1px solid var(--color-border);
            border-radius: 12px;
            padding: 25px;
            text-align: center;
            display: flex;
            flex-direction: column;
            transition: border-color 0.3s;
        }
        .plan-card:hover, .car-card:hover {
            border-color: var(--color-secondary);
        }
        .plan-card h2, .car-card h3 {
            color: var(--color-primary);
            margin-top: 0;
        }
        .plan-card .investment-amount, .car-price {
            font-size: 2rem;
            font-weight: 700;
            margin: 10px 0;
            color: var(--color-accent);
        }
        .plan-card ul {
            list-style: none;
            padding: 0;
            text-align: left;
            margin: 20px 0;
            flex-grow: 1;
        }
        .plan-card ul li {
            margin-bottom: 8px;
            color: #ccc;
        }
        .plan-card ul li i {
            color: #10b981; /* Success Green */
            margin-right: 8px;
        }
        .cta-button {
            display: block;
            background-color: var(--color-primary);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            margin-top: auto; /* Pushes button to bottom */
            transition: background-color 0.2s;
        }
        .cta-button:hover {
            background-color: var(--color-secondary);
        }

        /* Car Specific Styling */
        .car-card img {
            width: 100%;
            height: auto;
            border-radius: 8px;
            margin-bottom: 15px;
        }
        .car-description {
            color: var(--color-text-light);
            font-size: 0.9rem;
            margin-bottom: 15px;
            flex-grow: 1; 
        }
    </style>
</head>
<body class="dashboard-body">

    <i class="fas fa-bars menu-toggle" id="menuToggle"></i>

    <div class="dashboard-layout">
        
        <div class="sidebar" id="sidebar">
            <div class="logo" style="font-size: 1.5rem; font-weight: 700; color: var(--color-primary);">TESLAAI</div>
            <nav style="margin-top: 20px; flex-grow: 1;">
                <a href="dashboard.html"><i class="fas fa-home"></i> Dashboard</a>
                <a href="new-investment.html" class="active"><i class="fas fa-hand-holding-usd"></i> New Investment</a>
                <a href="deposit.html"><i class="fas fa-wallet"></i> Deposit</a>
                <a href="withdraw.html"><i class="fas fa-money-bill-transfer"></i> Withdraw</a>
            </nav>
            <div class="sidebar-footer" style="padding-top: 15px; border-top: 1px solid var(--color-border); margin-top: auto;">
                <p style="font-size: 0.8rem; color: var(--color-text-light);">Client ID: <span id="client-id-display" style="font-weight: 600; color: var(--color-primary);">Loading...</span></p>
                <a href="#" id="logout-button" style="color: var(--color-primary); font-size: 0.9rem; margin-top: 10px; display: block;"><i class="fas fa-sign-out-alt"></i> Logout</a>
            </div>
        </div>
        
        <div class="main-content">
            <div class="top-bar">
                <h1>ðŸ“ˆ New Investments & Exclusive Shop</h1>
            </div>

            <div class="content-panel">
                <section id="plans">
                    <h2>ðŸ’° Our Investment Plans</h2>
                    <p style="color: var(--color-text-light); margin-bottom: 50px;">Choose the plan that best fits your financial goals. All plans include daily AI management and profit distribution every 3 days.</p>
                    
                    <div class="plans-grid">
                        
                        <div class="plan-card" data-plan-name="Bronze_Tier" data-price="2000">
                            <h2>Bronze Tier</h2>
                            <div class="investment-amount">$2,000</div>
                            <div class="return-period">Profit Payout: Every 3 Days</div>
                            <ul>
                                <li><i class="fas fa-check-circle"></i> Minimum Capital: $2,000</li>
                                <li><i class="fas fa-check-circle"></i> AI Strategy: Low Volatility</li>
                                <li><i class="fas fa-check-circle"></i> Estimated Monthly Return: 5% - 8%</li>
                                <li><i class="fas fa-check-circle"></i> Basic Support</li>
                            </ul>
                            <a href="#" class="cta-button select-plan-btn">Select Plan</a> 
                        </div>

                        <div class="plan-card" data-plan-name="Silver_Tier" data-price="5000">
                            <h2>Silver Tier</h2>
                            <div class="investment-amount">$5,000</div>
                            <div class="return-period">Profit Payout: Every 3 Days</div>
                            <ul>
                                <li><i class="fas fa-check-circle"></i> Minimum Capital: $5,000</li>
                                <li><i class="fas fa-check-circle"></i> AI Strategy: Balanced Growth</li>
                                <li><i class="fas fa-check-circle"></i> Estimated Monthly Return: 8% - 12%</li>
                                <li><i class="fas fa-check-circle"></i> Dedicated Account Manager</li>
                            </ul>
                            <a href="#" class="cta-button select-plan-btn">Select Plan</a>
                        </div>

                        <div class="plan-card featured" data-plan-name="Gold_Tier" data-price="10000">
                            <h2>Gold Tier (Recommended)</h2>
                            <div class="investment-amount">$10,000</div>
                            <div class="return-period">Profit Payout: Every 3 Days</div>
                            <ul>
                                <li><i class="fas fa-check-circle"></i> Minimum Capital: $10,000</li>
                                <li><i class="fas fa-check-circle"></i> AI Strategy: Optimized Aggression</li>
                                <li><i class="fas fa-check-circle"></i> Estimated Monthly Return: 12% - 18%</li>
                                <li><i class="fas fa-check-circle"></i> Priority Support & Analytics</li>
                            </ul>
                            <a href="#" class="cta-button select-plan-btn">Select Plan</a>
                        </div>

                        <div class="plan-card" data-plan-name="Platinum_Tier" data-price="25000">
                            <h2>Platinum Tier</h2>
                            <div class="investment-amount">$25,000</div>
                            <div class="return-period">Profit Payout: Every 3 Days</div>
                            <ul>
                                <li><i class="fas fa-check-circle"></i> Minimum Capital: $25,000</li>
                                <li><i class="fas fa-check-circle"></i> AI Strategy: Exclusive Access</li>
                                <li><i class="fas fa-check-circle"></i> Estimated Monthly Return: 18% - 25%</li>
                                <li><i class="fas fa-check-circle"></i> Quarterly Strategy Review</li>
                            </ul>
                            <a href="#" class="cta-button select-plan-btn">Select Plan</a>
                        </div>

                        <div class="plan-card" data-plan-name="Diamond_Tier" data-price="50000">
                            <h2>Diamond Tier</h2>
                            <div class="investment-amount">$50,000</div>
                            <div class="return-period">Profit Payout: Every 3 Days</div>
                            <ul>
                                <li><i class="fas fa-check-circle"></i> Minimum Capital: $50,000</li>
                                <li><i class="fas fa-check-circle"></i> AI Strategy: Fully Bespoke</li>
                                <li><i class="fas fa-check-circle"></i> Estimated Monthly Return: 25% - 35%</li>
                                <li><i class="fas fa-check-circle"></i> Personal Senior Advisor</li>
                            </ul>
                            <a href="#" class="cta-button select-plan-btn">Select Plan</a>
                        </div>

                        <div class="plan-card" data-plan-name="Centurion_Tier" data-price="100000">
                            <h2>Centurion Tier</h2>
                            <div class="investment-amount">$100,000+</div>
                            <div class="return-period">Profit Payout: Every 3 Days</div>
                            <ul>
                                <li><i class="fas fa-check-circle"></i> Minimum Capital: $100,000</li>
                                <li><i class="fas fa-check-circle"></i> AI Strategy: Private Market Access</li>
                                <li><i class="fas fa-check-circle"></i> Estimated Monthly Return: 35%+</li>
                                <li><i class="fas fa-check-circle"></i> Direct Access to Portfolio Manager</li>
                            </ul>
                            <a href="#" class="cta-button select-plan-btn">Select Plan</a>
                        </div>
                        
                    </div>
                </section>
            </div>

            <div class="content-panel">
                <section id="luxury-cars">
                    <h2>ðŸš— Exclusive Telsa Luxury Vehicles</h2>
                    <p style="color: var(--color-text-light); margin-bottom: 50px;">Use your investment profits or fresh capital to purchase a Telsa vehicle with cryptocurrency through our exclusive partnership.</p>
                    
                    <div class="car-grid">

                        <div class="car-card" data-car-name="Model_S_Plaid" data-price="109990">
                            <div class="car-info">
                                <img src="images/model_s.jpg" alt="Tesla Model S Plaid">
                                <h3>Tesla Model S Plaid</h3>
                                <p class="car-description">The ultimate combination of power, efficiency, and safety. 0-60mph in 1.99s, with Tri-Motor All-Wheel Drive.</p>
                                <p class="car-price">$109,990</p>
                                <a href="#" class="cta-button add-to-cart-btn">Add to Cart</a>
                            </div>
                        </div>

                        <div class="car-card" data-car-name="Model_X" data-price="98490">
                            <div class="car-info">
                                <img src="images/model_x.jpg" alt="Tesla Model X">
                                <h3>Tesla Model X</h3>
                                <p class="car-description">The safest SUV on the road. Falcon Wing doors, seating for up to seven, and an incredible 333 miles of range.</p>
                                <p class="car-price">$98,490</p>
                                <a href="#" class="cta-button add-to-cart-btn">Add to Cart</a>
                            </div>
                        </div>

                        <div class="car-card" data-car-name="Model_3_LR" data-price="47490">
                            <div class="car-info">
                                <img src="images/model_3.jpg" alt="Tesla Model 3 Long Range">
                                <h3>Tesla Model 3 Long Range</h3>
                                <p class="car-description">High-performance electric sedan. All-wheel drive, premium interior, and superior handling for daily driving.</p>
                                <p class="car-price">$47,490</p>
                                <a href="#" class="cta-button add-to-cart-btn">Add to Cart</a>
                            </div>
                        </div>

                        <div class="car-card" data-car-name="Cybertruck_Tri" data-price="99990">
                            <div class="car-info">
                                <img src="images/cybertruck_tri.jpg" alt="Tesla Cybertruck Tri-Motor">
                                <h3>Cybertruck Tri-Motor</h3>
                                <p class="car-description">Beast of a truck. All-wheel drive with Tri-Motor, 0-60 in 2.9 seconds, over 500 miles of range.</p>
                                <p class="car-price">$99,990</p>
                                <a href="#" class="cta-button add-to-cart-btn">Add to Cart</a>
                            </div>
                        </div>

                        <div class="car-card" data-car-name="Cybertruck_Dual" data-price="79990">
                            <div class="car-info">
                                <img src="images/cybertruck_dual.jpg" alt="Tesla Cybertruck Dual-Motor">
                                <h3>Cybertruck Dual-Motor</h3>
                                <p class="car-description">Versatile and rugged. All-wheel drive, 300+ miles of range, perfect for work and adventure.</p>
                                <p class="car-price">$79,990</p>
                                <a href="#" class="cta-button add-to-cart-btn">Add to Cart</a>
                            </div>
                        </div>
                        
                        <div class="car-card" data-car-name="Cybertruck_Rear" data-price="60990">
                            <div class="car-info">
                                <img src="images/cybertruck_rear.jpg" alt="Tesla Cybertruck Single-Motor">
                                <h3>Cybertruck Rear-Wheel</h3>
                                <p class="car-description">Single-motor rear-wheel drive, durable exoskeleton, and impressive towing capacity.</p>
                                <p class="car-price">$60,990</p>
                                <a href="#" class="cta-button add-to-cart-btn">Add to Cart</a>
                            </div>
                        </div>
                        
                    </div>
                </section>
            </div>
        </div>
    </div>

    <script>
        // --- AUTHENTICATION CHECK ---
        document.addEventListener('DOMContentLoaded', function() {
            const token = localStorage.getItem('userToken');
            
            // CRITICAL SECURITY GUARDRAIL: If no token exists, redirect to login page.
            if (!token) {
                console.warn('Authentication token missing. Redirecting to login.');
                window.location.href = 'login.html';
                return; // Stop execution if redirecting
            }

            // --- UI Setup (Only run if authenticated) ---
            const clientId = localStorage.getItem('clientId') || 'TAI-XXXXXX';
            document.getElementById('client-id-display').textContent = clientId;
            
            // MOBILE MENU TOGGLE LOGIC
            document.getElementById('menuToggle').addEventListener('click', function() {
                document.getElementById('sidebar').classList.toggle('active');
            });

            // LOGOUT BUTTON HANDLER
            document.getElementById('logout-button').addEventListener('click', function(e) {
                e.preventDefault();
                localStorage.removeItem('userToken');
                localStorage.removeItem('clientId');
                // Remove other local storage items if needed (name, email, etc.)
                window.location.href = 'login.html';
            });
            
            // --- PLAN SELECTION LOGIC ---
            const planButtons = document.querySelectorAll('.select-plan-btn');
            planButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    const card = this.closest('.plan-card');
                    const planName = card.getAttribute('data-plan-name');
                    const price = card.getAttribute('data-price');
                    
                    if (planName && price) {
                        window.location.href = `checkout.html?mode=plan&item=${planName}&price=${price}`;
                    } else {
                        alert('Error: Missing plan details. Cannot proceed to checkout.');
                    }
                });
            });

            // --- CAR PURCHASE LOGIC ---
            const carButtons = document.querySelectorAll('.add-to-cart-btn');
            carButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    const card = this.closest('.car-card');
                    const carName = card.getAttribute('data-car-name');
                    const price = card.getAttribute('data-price');
                    
                    if (carName && price) {
                        window.location.href = `checkout.html?mode=car&item=${carName}&price=${price}`;
                    } else {
                        alert('Error: Missing car details. Cannot proceed to checkout.');
                    }
                });
            });
        });
    </script>
</body>
</html>